# Docs for the Azure Web Apps Deploy action: https://github.com/Azure/webapps-deploy
# More GitHub Actions for Azure: https://github.com/Azure/actions

name: Shared Blackball - Build Solution File

on:
 workflow_call:
    inputs:
     solution_file_name:
      required: true
      type: string
jobs:
  build: 
    runs-on: windows-latest

    steps:
      - uses: actions/checkout@v3
      - name: Set up .NET Core
        uses: actions/setup-dotnet@v2
        with:
          dotnet-version: '6.0.x'
          include-prerelease: true
        
      - name: Initialize Blackball Nuget Farm
        # We give this a unique name (blackball-github-actions) so as to be sure it doesn't conflict with anything embedded in any of our code repos (e.g. via a packageSource tag) because dotnet doesn't like it when you add dupes
        run: dotnet nuget add source --name blackball-github-actions "https://nuget.blackballsoftware.com/api/v2"
        
      - name: Install dependencies
        run: dotnet restore "${{ inputs.solution_file_name }}"
        
      - name: Build dependencies
        run: dotnet build "${{ inputs.solution_file_name }}" --no-restore -c Release
        
